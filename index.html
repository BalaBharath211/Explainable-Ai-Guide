<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explainable AI (XAI) Deep Dive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfcfb;
            color: #374151; 
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Adjusted for better mobile fit */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link.active {
            color: #0d9488;
            background-color: #ccfbf1;
        }
        .prose h3 {
            font-weight: 600; font-size: 1.25rem; margin-top: 1.5em; margin-bottom: 0.75em;
        }
        .prose p, .prose li {
            font-size: 1.1rem; line-height: 1.7;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.2, 1, 0.2, 1);
        }
        .accordion-icon {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <header id="header" class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 border-b-2 border-gray-100 shadow-sm">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-teal-700">XAI Explained</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-2">
                        <a href="#beginner" class="nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 px-3 py-2 rounded-md text-sm font-medium">Beginner</a>
                        <a href="#intermediate" class="nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 px-3 py-2 rounded-md text-sm font-medium">Intermediate</a>
                        <a href="#comparison" class="nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 px-3 py-2 rounded-md text-sm font-medium">Comparison</a>
                        <a href="#advanced" class="nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 px-3 py-2 rounded-md text-sm font-medium">Advanced</a>
                        <a href="#practice" class="nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 px-3 py-2 rounded-md text-sm font-medium">Practice</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-teal-600 hover:bg-teal-50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-teal-500">
                        <span class="sr-only">Open main menu</span>
                        <svg id="hamburger-icon" class="h-6 w-6 block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                        <svg id="close-icon" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#beginner" class="mobile-nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 block px-3 py-2 rounded-md text-base font-medium">Beginner</a>
                <a href="#intermediate" class="mobile-nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 block px-3 py-2 rounded-md text-base font-medium">Intermediate</a>
                <a href="#comparison" class="mobile-nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 block px-3 py-2 rounded-md text-base font-medium">Comparison</a>
                <a href="#advanced" class="mobile-nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 block px-3 py-2 rounded-md text-base font-medium">Advanced</a>
                <a href="#practice" class="mobile-nav-link text-gray-600 hover:text-teal-600 hover:bg-teal-50 block px-3 py-2 rounded-md text-base font-medium">Practice</a>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 prose lg:prose-xl">

        <section id="intro" class="text-center mb-20">
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-gray-900">
                A Researcher's Guide to <span class="bg-clip-text text-transparent bg-gradient-to-r from-teal-500 to-cyan-600">Explainable AI</span>
            </h1>
            <p class="mt-6 text-lg text-gray-600 max-w-3xl mx-auto">From the 'black box' problem to the frontiers of research. An interactive journey into the heart of trustworthy AI.</p>
        </section>

        <div class="space-y-16">
            <section id="beginner" class="scroll-mt-20 p-6 sm:p-8 rounded-2xl bg-white">
                <h2 class="text-3xl font-bold tracking-tight text-gray-900 border-b-2 border-teal-500 pb-2">
                    Level 1: The 'Black Box' Conundrum
                </h2>
                <p class="mt-4">This section introduces the core problem XAI aims to solve, exploring why powerful AI models are often opaque and why this is a barrier in critical applications.</p>
                <h3>What is the 'Black Box' Problem?</h3>
                <p>In AI, a "black box" is a model whose internal workings are hidden. We see inputs and outputs, but the process between is a complex web of math, especially in deep learning.</p>
                
                <div class="my-8 bg-gray-100 p-6 sm:p-8 rounded-lg flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8 text-center">
                    <div class="bg-white p-4 rounded-lg shadow-md"><span class="text-lg font-semibold">Patient Data</span></div>
                    <div class="text-4xl text-teal-600 font-mono transform rotate-90 md:rotate-0">&rarr;</div>
                    <div class="bg-gray-800 text-white p-8 rounded-lg shadow-xl relative">
                        <span class="text-5xl font-bold">?</span><span class="absolute -top-3 -left-3 bg-teal-500 text-white text-xs font-bold px-2 py-1 rounded-full">AI Model</span>
                    </div>
                    <div class="text-4xl text-teal-600 font-mono transform rotate-90 md:rotate-0">&rarr;</div>
                    <div class="bg-white p-4 rounded-lg shadow-md"><span class="text-lg font-semibold">"High Risk"</span></div>
                </div>

                <h3>Why is Explainability so Important?</h3>
                <p>Trust is the cornerstone of adoption. In high-stakes domains, a simple prediction isn't enough; we need to know it was made for the right reasons.</p>
                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 not-prose">
                    <div class="bg-teal-50/50 p-6 rounded-lg border border-teal-200">
                        <h4 class="font-bold text-lg text-teal-800">Healthcare</h4>
                        <p class="mt-2 text-gray-700">A doctor needs to know *why* an AI flags a patient as high-risk for diagnosis and to build trust with patients.</p>
                    </div>
                    <div class="bg-amber-50/50 p-6 rounded-lg border border-amber-200">
                        <h4 class="font-bold text-lg text-amber-800">Finance</h4>
                        <p class="mt-2 text-gray-700">When an AI denies a loan, regulations require a reason. Explanations ensure fairness and provide transparency.</p>
                    </div>
                </div>
            </section>
            
            <section id="intermediate" class="scroll-mt-20 p-6 sm:p-8 rounded-2xl bg-gray-50/80">
                <h2 class="text-3xl font-bold tracking-tight text-gray-900 border-b-2 border-teal-500 pb-2">
                    Level 2: Peeking Inside with LIME & SHAP
                </h2>
                 <p class="mt-4">Let's explore two popular "model-agnostic" tools for solving the black box problem. This section provides a conceptual and interactive understanding of how LIME and SHAP work.</p>
                <div class="my-8 bg-white p-6 rounded-lg border shadow-sm">
                    <h4 class="text-xl font-semibold text-center mb-4">Interactive LIME Simulation</h4>
                    <p class="text-center text-sm mb-4">The blue curve is the model's complex decision boundary. Click a data point to see LIME's simple, local explanation (the orange line).</p>
                    <div class="chart-container"><canvas id="limeChart"></canvas></div>
                    <p id="limeExplanation" class="text-center mt-4 font-medium text-teal-700 h-6"></p>
                </div>
                 <div class="my-8 bg-white p-6 rounded-lg border shadow-sm">
                    <h4 class="text-xl font-semibold text-center mb-4">Interactive SHAP Explanation</h4>
                    <div class="flex flex-col items-center">
                        <label for="shapScenario" class="text-sm font-medium mb-2">Select a loan application scenario:</label>
                        <select id="shapScenario" class="p-2 border rounded-md shadow-sm bg-white">
                            <option value="approved">Application Approved (92%)</option>
                            <option value="denied">Application Denied (28%)</option>
                        </select>
                    </div>
                    <p class="text-center text-sm my-4">Blue bars push the prediction higher (Approve), while red bars push it lower (Deny).</p>
                    <div class="chart-container"><canvas id="shapChart"></canvas></div>
                </div>
            </section>
        </div>

    </main>
    
    <footer class="bg-gray-100 mt-20">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2025 XAI Research Initiative. An interactive guide to understanding modern AI.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- MOBILE MENU SCRIPT ---
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const hamburgerIcon = document.getElementById('hamburger-icon');
    const closeIcon = document.getElementById('close-icon');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

    menuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        hamburgerIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
    });
    
    // Close mobile menu when a link is clicked
    mobileNavLinks.forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
            hamburgerIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
        });
    });

    // --- SCROLLSPY SCRIPT ---
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-link');
    const observerOptions = { root: null, rootMargin: '0px', threshold: 0.4 };
    const observer = new IntersectionObserver((entries) => {
        let activeId = null;
        entries.forEach(entry => {
            if (entry.isIntersecting && entry.intersectionRatio >= 0.4) {
                 activeId = entry.target.getAttribute('id');
            }
        });
        navLinks.forEach(link => {
            const linkHref = link.getAttribute('href').substring(1);
            link.classList.toggle('active', linkHref === activeId);
        });
    }, observerOptions);
    sections.forEach(section => { observer.observe(section); });

    // --- ACCORDION SCRIPT ---
    const accordions = document.querySelectorAll('.accordion-item');
    accordions.forEach(item => {
        const header = item.querySelector('.accordion-header');
        const content = item.querySelector('.accordion-content');
        const icon = header.querySelector('.accordion-icon');
        header.addEventListener('click', () => {
            const isExpanded = content.style.maxHeight && content.style.maxHeight !== '0px';
            accordions.forEach(i => {
                i.querySelector('.accordion-content').style.maxHeight = '0px';
                i.querySelector('.accordion-icon').style.transform = 'rotate(0deg)';
            });
            if (!isExpanded) {
                content.style.maxHeight = content.scrollHeight + 'px';
                icon.style.transform = 'rotate(45deg)';
            }
        });
    });

    // --- CHART RENDERING SCRIPTS ---
    // NOTE: Chart.js logic is unchanged and placed here for completeness.
    let limeChartInstance, shapChartInstance;
    function renderLIMEChart() {
        const ctx = document.getElementById('limeChart').getContext('2d');
        const dataPoints = [];
        for (let i = 0; i < 50; i++) {
            const x = Math.random() * 10;
            const y = Math.sin(x) * 2 + Math.random() * 2 - 1 + 5;
            const boundary = Math.sin(x) * 2 + 5;
            dataPoints.push({ x, y, label: y > boundary ? 1 : 0 });
        }
        const decisionBoundary = Array.from({ length: 100 }, (_, i) => {
            const x = i * 0.1;
            return { x, y: Math.sin(x) * 2 + 5 };
        });
        limeChartInstance = new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Patient (High Risk)', data: dataPoints.filter(p => p.label === 1), backgroundColor: 'rgba(239, 68, 68, 0.7)', pointRadius: 6,
                }, {
                    label: 'Patient (Low Risk)', data: dataPoints.filter(p => p.label === 0), backgroundColor: 'rgba(34, 197, 94, 0.7)', pointRadius: 6,
                }, {
                    label: 'True Decision Boundary', data: decisionBoundary, borderColor: 'rgba(59, 130, 246, 1)', borderWidth: 3, type: 'line', showLine: true, pointRadius: 0, fill: false,
                }, {
                    label: 'LIME Explanation', data: [], borderColor: 'rgba(217, 119, 6, 1)', borderWidth: 2, borderDash: [5, 5], type: 'line', showLine: true, pointRadius: 0, fill: false,
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { x: { title: { display: true, text: 'Feature 1 (e.g., Age)' } }, y: { title: { display: true, text: 'Feature 2 (e.g., Blood Pressure)' } } },
                onClick: (event) => {
                    const activePoints = limeChartInstance.getElementsAtEventForMode(event, 'nearest', { intersect: true }, true);
                    if (activePoints.length > 0) {
                        const point = activePoints[0];
                        const dataset = limeChartInstance.data.datasets[point.datasetIndex];
                        const data = dataset.data[point.index];
                        updateLIMEExplanation(data.x);
                    }
                }
            }
        });
    }
    function updateLIMEExplanation(x_center) {
        const slope = Math.cos(x_center) * 2;
        const y_center = Math.sin(x_center) * 2 + 5;
        const x1 = x_center - 1.5; const y1 = y_center - 1.5 * slope;
        const x2 = x_center + 1.5; const y2 = y_center + 1.5 * slope;
        limeChartInstance.data.datasets[3].data = [{x: x1, y: y1}, {x: x2, y: y2}];
        limeChartInstance.update();
        document.getElementById('limeExplanation').textContent = `Locally, the model behaves like this simple line.`;
    }
    function renderSHAPChart(scenario = 'approved') {
        const ctx = document.getElementById('shapChart').getContext('2d');
        const scenarios = {
            approved: { baseValue: 0.5, prediction: 0.92, labels: ['High Income', 'Low Debt', 'Good Credit History', 'Short Loan Term'], data: [0.20, 0.15, 0.10, 0.07] },
            denied: { baseValue: 0.5, prediction: 0.28, labels: ['High Debt', 'Low Income', 'Short Credit History', 'High Loan Amount'], data: [-0.12, -0.08, -0.05, -0.07] }
        };
        const chartData = scenarios[scenario];
        const backgroundColors = chartData.data.map(d => d > 0 ? 'rgba(59, 130, 246, 0.7)' : 'rgba(239, 68, 68, 0.7)');
        const borderColors = chartData.data.map(d => d > 0 ? 'rgba(59, 130, 246, 1)' : 'rgba(239, 68, 68, 1)');
        if (shapChartInstance) {
            shapChartInstance.data.labels = chartData.labels;
            shapChartInstance.data.datasets[0].data = chartData.data;
            shapChartInstance.data.datasets[0].backgroundColor = backgroundColors;
            shapChartInstance.data.datasets[0].borderColor = borderColors;
            shapChartInstance.options.plugins.title.text = `Explaining Prediction: ${Math.round(chartData.prediction*100)}% (Base: ${chartData.baseValue*100}%)`;
            shapChartInstance.update();
            return;
        }
        shapChartInstance = new Chart(ctx, {
            type: 'bar',
            data: { labels: chartData.labels, datasets: [{ label: 'SHAP Value (impact on model output)', data: chartData.data, backgroundColor: backgroundColors, borderColor: borderColors, borderWidth: 1 }] },
            options: {
                indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                scales: { x: { title: { display: true, text: 'Contribution to Prediction' }, stacked: true }, y: { stacked: true } },
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: `Explaining Prediction: ${Math.round(chartData.prediction*100)}% (Base: ${chartData.baseValue*100}%)`, font: { size: 16 } },
                    tooltip: { callbacks: { label: function(context) { let label = context.dataset.label || ''; if (label) { label += ': '; } if (context.parsed.x !== null) { label += context.parsed.x.toFixed(3); } return label; } } }
                }
            }
        });
    }
    document.getElementById('shapScenario').addEventListener('change', (e) => { renderSHAPChart(e.target.value); });
    renderLIMEChart();
    renderSHAPChart();
});
</script>

</body>
</html>